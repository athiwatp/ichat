<!DOCTYPE html>

<html>
	<head>
		<title>Chat</title>
		<link rel="stylesheet"
			href="https://icode.run/bootstrap/css/bootstrap.min.css" >
		<style>
			form * {
				margin-top: 10px;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<form action='javascript:send()'>
				<textarea class="form-control" rows="5"></textarea>
				<input class="form-control" placeholder="Type here"
					autofocus>
				<button type="submit" class="btn btn-primary">Send</button>
				<button id='clear' class="btn btn-danger">Clear</button>
			</form>
		</div>

		<script src="https://icode.run/jquery.js"></script>
		<script src="/socket.io/socket.io.js"></script>
		<script>
			$('#clear').click(clear)
			function clear() {
				$('textarea').html("")
			}
			var socket = io.connect("/")
			socket.on("connect", () => {
				socket.on("message", m => {
					var x = $('textarea').html()
					if (x == "") {
						x = m
					} else {
						x = x + "\n" + m
					}
					$('textarea').html(x)
				})
			})

			function send() {
				var m = $('input').val()
				$('input').val("")
				socket.send(m)
			}
		</script>
	</body>
</html>

